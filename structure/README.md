# Tipical golang project structure

## Директории

### **`/cmd`**

- Точка входа для нашего приложения. Имя директории для каждого приложения должно совпадать с именем исполняемого файла, который вы хотите собрать. 

Не стоит располагать в этой директории много кода. Самой распространенной практикой является использование маленькой main-функции, которая импортирует и вызывает весь необходимый код из директорий `/internal` и `/pkg`.

---

### **`/internal`**

- Сердце нашего приложения — всю внутреннюю логику приложения храним здесь. /internal не импортируем в других приложениях и библиотеках. Код, который написан тут, предназначен исключительно для внутреннего использования в рамках кодовой базы.

С версии Go 1.4 определен механизм, который не позволяет импортировать пакеты вне данного проекта, если они находятся внутри `/internal`. 

В `/internal` мы храним бизнес-логику проекта и работу с базами данными. В общем, всю логику, связанную с этим приложением. Выстроить структуру внутри /internal можно по-разному, в зависимости от архитектуры.

Логика должна быть выстроена так, чтобы слои иерархически обращались друг к другу сверху вниз и наоборот. Не допускается, чтобы один слой перескакивал через промежуточный (например, транспортный напрямую в базу данных) и нижний не общался с верхним (например, база данных ходит в транспортный слой).

---

### **Директории `/internal`**


### **`/app`**

Точка, где все наши зависимости и логика собираются и запускают приложение. Run-метод, который вызывается из /cmd.

### **`/config`**

Инициализация общих конфигураций приложения, которые мы прописывали в корне проекта.

### **`/database`**

- Слой базы данных. Файлы содержат методы для взаимодействия с базами данных.

### **`/models`**

- Слой базы данных. Структуры таблиц баз данных.

### **`/services`**

- Бизнес слой. Вся бизнес-логика приложения.

### **`/transport`**

- Транспортный слой. Здесь храним http-настройки сервера, хендлеры, порты и так далее.

---

### **`/pkg`**

- Если в `/internal` мы хранили код, который не могли импортировать в других приложениях, то в `/pkg` храним библиотеки, используемые в сторонних приложениях.

Это нужно, чтобы потом импортировать их в другой проект, а не дублировать код из проекта в проект. В общем, кастомные или общие библиотеки мы храним здесь.

Можно не использовать эту директорию, если проект совсем небольшой и добавление нового уровня вложенности не имеет практического смысла.

### **`/configs`**

Статические конфигурации нашего приложения, связанные с процессом сборки приложения. Обычно это yaml-файлы.

### **`/api`**

Документация по вашему API. Спецификации OpenAPI или Swagger, файлы JSON Schema, файлы определения протоколов.

### **`/build`**

Файлы конфигурации для билда проекта, Docker-контейнера и так далее.

### **`/deployments`**

Содержит файлы, связанные с развертыванием: плейбуки Ansible, манифесты Docker Compose, манифесты и настройки Kuberntes, диаграммы Helm.

### **`/docs`**

Документирование кода — важная часть в начале проекта. Поэтому всю документацию кода и дизайна (в дополнение к автоматической документации Godoc) храним здесь.

### **`/migrations`**

Здесь все миграции, связанные с базами данными: например, SQL-файлы.

### **`/README.md`**

Трудно ожидать, что кто-то захочет погрузиться в ваш код, если ему не предоставили общего описания проекта. Поэтому файл README тоже необходим.
